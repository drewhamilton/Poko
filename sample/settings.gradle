rootProject.name = 'Poko sample'

includeBuild('../.') {
    // Shared gradle.properties
    List<String> propertiesFiles = [
        "../gradle.properties",
        "../local.properties",
    ]
    propertiesFiles.each {fileName ->
        Properties properties = new Properties()
        file(fileName).withInputStream { properties.load(it) }
        properties.each { key, val ->
            ext.set(key, val)
        }
    }

    // Poko modules
    dependencySubstitution {
        substitute module("$publish_group:$publish_compiler_plugin_artifact") with project(':poko-compiler-plugin')
        substitute module("$publish_group:$publish_gradle_plugin_artifact") with project(':poko-gradle-plugin')
    }
}

enableFeaturePreview('VERSION_CATALOGS')
dependencyResolutionManagement {
    versionCatalogs {
        libs {
            from(files("../gradle/libs.versions.toml"))
        }
    }
}
